import fetch from 'node-fetch';\n\n// Uses Open-Meteo (no key) â€” returns simple summary\nexport async function getWeather({ lat, lon, date }) {\n  // Request daily temps and weathercode\n  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto&start_date=${date}&end_date=${date}`;\n  const r = await fetch(url);\n  if (!r.ok) throw new Error(`Weather API error: ${r.status}`);\n  const data = await r.json();\n  const daily = data.daily || {};\n  return {\n    source: 'open-meteo',\n    date,\n    temps: {\n      max: daily.temperature_2m_max?.[0] ?? null,\n      min: daily.temperature_2m_min?.[0] ?? null\n    },\n    weathercode: daily.weathercode?.[0] ?? null,\n    raw: data\n  };\n}\n